<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Mermaid 调试版</title>
    <style>
        body {
            font-family: "Microsoft YaHei", sans-serif;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .mermaid {
            background-color: #fff;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <h1>Mermaid 架构图调试版</h1>
    <div id="graph-container" class="mermaid"></div>

    <pre id="graph-definition" style="display:none">
graph TD
    subgraph 数据源 (Data Sources)
        direction LR
        A[原始流量 (Optional, Sampling)]
        B[网元内置探针 (CHR/UFDR)]
        C[外部探针 (XDR)]
        D[网元日志 (Logs)]
        E[性能计数器 (PM Counters)]
        F[网络配置 (Configuration)]
        G[告警数据 (Alarms)]
        H[用户投诉/工单 (Tickets)]
    end
    %% 省略后面...

    </pre>

    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';

        mermaid.initialize({ startOnLoad: false, logLevel: 'debug' });

        const graphText = document.getElementById('graph-definition').textContent;
        console.log("Mermaid Graph Definition:\n", graphText);

        try {
            mermaid.parse(graphText);
            console.log("✅ Mermaid 语法检查通过");

            // 渲染到指定容器
            document.getElementById('graph-container').innerHTML = graphText;
            mermaid.run();
        } catch (error) {
            console.error("❌ Mermaid 解析失败:", error);
        }
    </script>
</body>
</html>
