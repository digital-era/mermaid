<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>AI ç½‘ç»œæ™ºèƒ½è¿ç»´æ¶æ„å›¾ (Mermaid)</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #f0f0f0; }
        .mermaid { background: #fff; padding: 20px; border-radius: 8px; }
    </style>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';

        mermaid.initialize({ startOnLoad: false, logLevel: 'debug' });

        const graphText = document.getElementById('graph-definition').textContent;
        console.log("ğŸ“„ Mermaid Graph Definition:\n", graphText);

        try {
            mermaid.parse(graphText);
            console.log("âœ… Mermaid è¯­æ³•æ£€æŸ¥é€šè¿‡");

            document.getElementById('graph-container').innerHTML = graphText;
            mermaid.run();
        } catch (e) {
            console.error("âŒ Mermaid è§£æå¤±è´¥ï¼š", e);
        }
    </script>
</head>
<body>
    <h2>AI ç½‘ç»œæ™ºèƒ½è¿ç»´æ¶æ„å›¾</h2>
    <div id="graph-container" class="mermaid"></div>

    <pre id="graph-definition" style="display:none">
graph TD
    subgraph æ•°æ®æº (Data Sources)
        direction LR
        A[åŸå§‹æµé‡ (Optional, Sampling)]
        B[ç½‘å…ƒå†…ç½®æ¢é’ˆ (CHR/UFDR)]
        C[å¤–éƒ¨æ¢é’ˆ (XDR)]
        D[ç½‘å…ƒæ—¥å¿— (Logs)]
        E[æ€§èƒ½è®¡æ•°å™¨ (PM Counters)]
        F[ç½‘ç»œé…ç½® (Configuration)]
        G[å‘Šè­¦æ•°æ® (Alarms)]
        H[ç”¨æˆ·æŠ•è¯‰/å·¥å• (Tickets)]
    end

    subgraph æ•°æ®æ¹–/ç»Ÿä¸€å­˜å‚¨ (Data Lake / Unified Storage)
        I[ç»Ÿä¸€æ•°æ®å­˜å‚¨ (Raw & Processed)]
    end

    subgraph æ•°æ®é¢„å¤„ç†ä¸ç‰¹å¾å·¥ç¨‹ (Preprocessing & Feature Engineering)
        J[æ•°æ®æ¸…æ´—ä¸è§„èŒƒåŒ–]
        K[å¤šæºæ•°æ®å…³è”ä¸èåˆ]
        L[AIé©±åŠ¨çš„ç‰¹å¾æå–/ç”Ÿæˆ]
    end

    subgraph AIåˆ†æå¼•æ“ (AI Analysis Engine)
        M[æ— ç›‘ç£å­¦ä¹  (Anomaly Detection, Clustering)]
        O[ç›‘ç£/è‡ªç›‘ç£å­¦ä¹  (Prediction, Classification)]
        P[æ·±åº¦å­¦ä¹ æ¨¡å‹ (RNN/LSTM/Transformer, GNN)]
        Q[å¼ºåŒ–å­¦ä¹  (Optimization, Policy Recommendation)]
        R[å¤§è¯­è¨€æ¨¡å‹/ç”Ÿæˆå¼AI (NLP Interface, Report Generation)]
    end

    subgraph çŸ¥è¯†ä¸æ´å¯Ÿå±‚ (Knowledge & Insight Layer)
        N[çŸ¥è¯†å›¾è°± / AIæ¨¡å‹åº“]
        S[å®æ—¶/ç¦»çº¿æŒ‡æ ‡è®¡ç®—]
        T[æ™ºèƒ½å‘Šè­¦ä¸æ ¹å› åˆ†æ]
        U[è¶‹åŠ¿é¢„æµ‹ä¸é£é™©è¯„ä¼°]
        V[ç”¨æˆ·ç”»åƒä¸è¡Œä¸ºåˆ†æ]
        W[ç½‘ç»œä¼˜åŒ–å»ºè®®]
    end

    subgraph åº”ç”¨ä¸äº¤äº’å±‚ (Application & Interaction Layer)
        X[æ™ºèƒ½å¯è§†åŒ–ä»ªè¡¨ç›˜]
        Y[è‡ªç„¶è¯­è¨€æŸ¥è¯¢æ¥å£]
        Z[è‡ªåŠ¨åŒ–æŠ¥å‘Šç”Ÿæˆ]
        AA[API for Orchestration/Automation]
        BB[è¿ç»´ä¸“å®¶äº¤äº’ç•Œé¢ (å«XAIè§£é‡Š)]
    end

    %% æ•°æ®æµå‘
    A --> I
    B --> I
    C --> I
    D --> I
    E --> I
    F --> I
    G --> I
    H --> I
    I --> J
    J --> K
    K --> L
    L --> M
    L --> O
    L --> P
    L --> Q
    L --> R

    %% AIå¼•æ“è´¡çŒ®åˆ°çŸ¥è¯†ä¸æ´å¯Ÿ
    M --- N
    O --- N
    P --- N
    Q --- N
    R --- N
    M --> T
    M --> V
    O --> S
    O --> T
    O --> U
    O --> V
    P --> S
    P --> T
    P --> U
    P --> V
    Q --> W
    R --> Y
    R --> Z

    %% çŸ¥è¯†åº“æ”¯æ’‘æ´å¯Ÿå±‚
    N --> S
    N --> T
    N --> U
    N --> V
    N --> W
    N --> BB

    %% æ´å¯Ÿå±‚é©±åŠ¨åº”ç”¨å±‚
    S --> X
    T --> X
    U --> X
    V --> X
    W --> X
    T --> AA
    W --> AA

    %% åº”ç”¨å±‚äº¤äº’ä¸åé¦ˆ
    X --> BB
    Y --> BB
    Z --> BB
    AA --> BB
    BB -- Feedback --> O
    BB -- Feedback --> P
    BB -- Feedback --> Q
    BB -- Feedback --> R
    </pre>
</body>
</html>
