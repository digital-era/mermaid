graph TD
    subgraph DataSources [数据源]
        A[原始流量_可选采样]
        B[网元内置探针_CHR_UFDR]  %% <-- 修改了这里，去掉了括号
        C[外部探针 (XDR)]
        D[网元日志]
        E[性能计数器 (PM Counters)]
        F[网络配置]
        G[告警数据]
        H[用户投诉/工单]
    end

    subgraph DataLake [数据湖/统一存储]
        I[统一数据存储 (原始 & 处理后)]
    end

    subgraph Preprocessing [数据预处理与特征工程]
        J[数据清洗与规范化]
        K[多源数据关联与融合]
        L[AI驱动的特征提取/生成]
    end

    subgraph AIAnalysis [AI分析引擎]
        M[无监督学习 (异常检测, 聚类)]
        O[监督/自监督学习 (预测, 分类)]
        P[深度学习模型 (RNN/LSTM/Transformer, GNN)]
        Q[强化学习 (优化, 策略推荐)]
        R[大语言模型/生成式AI (NLP接口, 报告生成)]
    end

    subgraph KnowledgeInsight [知识与洞察层]
        N[知识图谱 / AI模型库]
        S[实时/离线指标计算]
        T[智能告警与根因分析]
        U[趋势预测与风险评估]
        V[用户画像与行为分析]
        W[网络优化建议]
    end

    subgraph ApplicationInteraction [应用与交互层]
        X[智能可视化仪表盘]
        Y[自然语言查询接口]
        Z[自动化报告生成]
        AA[编排/自动化API]
        BB[运维专家交互界面 (含XAI解释)]
    end

    %% 数据流向 (Data Flow)
    A --> I
    B --> I
    C --> I
    D --> I
    E --> I
    F --> I
    G --> I
    H --> I
    I --> J
    J --> K
    K --> L
    L --> M
    L --> O
    L --> P
    L --> Q
    L --> R

    %% AI引擎贡献到知识与洞察 (AI Engine to Knowledge/Insight)
    M --- N
    O --- N
    P --- N
    Q --- N
    R --- N
    M --> T
    M --> V
    O --> S
    O --> T
    O --> U
    O --> V
    P --> S
    P --> T
    P --> U
    P --> V
    Q --> W
    R --> Y
    R --> Z

    %% 知识库支撑洞察层 (Knowledge Base supporting Insight)
    N --> S
    N --> T
    N --> U
    N --> V
    N --> W
    N --> BB

    %% 洞察层驱动应用层 (Insight drives Application)
    S --> X
    T --> X
    U --> X
    V --> X
    W --> X
    T --> AA
    W --> AA

    %% 应用层交互与反馈 (Application Interaction & Feedback)
    X --> BB
    Y --> BB
    Z --> BB
    AA --> BB
    BB -- 反馈 --> O
    BB -- 反馈 --> P
    BB -- 反馈 --> Q
    BB -- 反馈 --> R
