<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mermaid Flowchart</title>
    <!-- 使用你确认可行的版本 -->
    <script src="https://unpkg.com/mermaid@10.9.0/dist/mermaid.min.js"></script>
    <script>
        // 使用基本初始化，确保 startOnLoad 为 true
        mermaid.initialize({
            startOnLoad: true,
            logLevel: 1, // 1=debug, 4=warn, 5=error
            theme: 'neutral', // 'default', 'forest', 'dark', 'neutral', 'base'
            // 在这里添加 themeVariables 来设置字体
            themeVariables: {
                fontSize: '18px',                // 设置字体大小，例如 '14px', '1em', '1.1rem' 等
                fontFamily: '"Microsoft YaHei", Arial, sans-serif' // 设置字体家族，优先使用微软雅黑，然后是 Arial，最后是无衬线字体
                                                  // 注意：如果字体名称包含空格，最好用引号括起来
            },
            // 可以根据需要加回 flowchart 的特定配置
            flowchart: {
               useMaxWidth: true,
               htmlLabels: true, // 保持为 true，因为你的标签包含中文和括号
               curve: 'basis'
            },
            // 安全级别，如果内容都来自你本地，'loose' 通常没问题
            // 如果渲染外部内容，应考虑 'strict' 或 'antiscript'
            securityLevel: 'loose'
        });
    </script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            font-size: 16px; /* 在这里添加 font-size 属性 
        }
        .mermaid {
            display: flex;
            justify-content: center;
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 5px;
            min-height: 400px; /* 保持足够高度 */
            overflow: auto;    /* 允许滚动 */
            box-sizing: border-box;
        }
        #error {
            color: red;
            font-weight: bold;
            margin-bottom: 10px;
            min-height: 1em;
        }
    </style>
</head>
<body>
    <h1>AI2.0-Powered Network Data Analytics Architecture</h1>
    <div id="error"></div> <!-- 用于显示潜在的JS错误 -->

    <!-- Mermaid 图表容器 -->
    <div class="mermaid">
        graph TD
            subgraph "数据源"
                A["原始流量/可选+采样"];
                B["内置软探针"];
                C["外置探针"];
                D["网元日志"];
                E["性能"];
                F["网络配置"];
                G["告警"];       
                H["数据用户投诉/工单"];
            end

            subgraph "数据湖/统一存储"
                I["统一数据存储"];
            end

            subgraph "数据预处理与特征工程"
                J["数据清洗与规范化"];
                K["多源数据关联与融合"];
                L["AI驱动的特征提取/生成"];
            end

            subgraph "AI 分析引擎"
                M["无监督学习（异常检测，聚类）"];
                O["监督/自监督学习（预测，分类）"];
                P["深度学习模型（循环神经网络/长短期记忆网络/Transformer，图神经网络）"];
                Q["强化学习（优化，策略推荐）"];
                R["大语言模型/生成式AI（自然语言处理接口 / NLP接口，报告生成）"];
            end

            subgraph "知识与洞察层"
                N["知识图谱 / AI模型库"];
                S["实时/离线指标计算"];
                T["智能告警与根因分析"];
                U["趋势预测与风险评估"];
                V["用户画像与行为分析"];
                W["网络优化建议"];
            end

            subgraph "应用与交互层"
                X["智能可视化仪表盘"];
                Y["自然语言查询接口"]; 
                Z["自动化报告生成"];
                AA["API编排/自动化"];
                BB["运维专家交互界面 (含AI解释)"];
            end

            %% 数据流向 (连接语句后加分号是可选的，换行通常足够)
            A --> I; B --> I; C --> I; D --> I; E --> I; F --> I; G --> I; H --> I;
            I --> J; J --> K; K --> L;
            L --> M; L --> O; L --> P; L --> Q; L --> R;

            %% AI引擎贡献到知识与洞察 (使用 --- 表示非直接数据流)
            M --- N; O --- N; P --- N; Q --- N; R --- N;  
            M --> T; M --> V;
            O --> S; O --> T; O --> U; O --> V;
            P --> S; P --> T; P --> U; P --> V;
            Q --> W;
            R --> Y; R --> Z; 

            %% 知识库支撑洞察层
            N --> S; N --> T; N --> U; N --> V; N --> W;
            N --> BB;

            %% 洞察层驱动应用层
            S --> X; T --> X; U --> X; V --> X; W --> X; 
            T --> AA; W --> AA; 

            %% 应用层交互与反馈
            X --> BB; Y --> BB; Z --> BB; AA --> BB;
            BB -- Feedback --> O; BB -- Feedback --> P; BB -- Feedback --> Q; 
    </div>

    <!-- Mermaid 图表容器 -->
    <div class="mermaid">
        graph TD
            subgraph "Data Sources"
                A["Original Traffic Optional+Sampling "];
                B["Soft Probe (CHR/UFDR)"];
                C["Passive Probe (XDR)"];
                D["Logs"];
                E["PM Counters"];
                F["Configuration"];
                G["Alarms"];       
                H["Tickets"];
            end

            subgraph "Data Lake / Unified Storage"
                I["Unified Raw Data processing/storage"];
            end

            subgraph "Preprocessing & Feature Engineering"
                J["Data Cleaning and Normalization"];
                K["Multi-source Data Association and Fusion "];
                L["AI-driven Feature Extraction / Generation"];
            end

            subgraph "AI Analysis Engine"
                M["Unsupervised Learning (Anomaly Detection, Clustering)"];
                O["Supervised / Self-supervised Learning (Prediction, Classification)"];
                P["Deep Learning Models (RNN/LSTM/Transformer, GNN)"];
                Q["Reinforcement Learning (Optimization, Policy Recommendation)"];
                R["Large Language Models (LLMs) / Generative AI (NLP Interface, Report Generation)"];
            end

            subgraph "Knowledge & Insight Layer"
                N["Knowledge Graph / AI Model Library (or AI Model Repository)"];
                S["Real-time / Offline Metric Calculation"];
                T["Intelligent Alerting and Root Cause Analysis"];
                U["Trend Forecasting and Risk Assessment"];
                V["User Profiling and Behavioral Analysis"];
                W["Network Optimization Recommendations"];
            end

            subgraph "应用与交互层 (Application & Interaction Layer)"
                X[" Intelligent Visualization Dashboard"];
                Y["Natural Language Query Interface"]; 
                Z["Automated Report Generation"];
                AA["API for Orchestration/Automation"];
                BB[" Operations Expert Interface (with AI Explanations) "];
            end

            %% 数据流向 (连接语句后加分号是可选的，换行通常足够)
            A --> I; B --> I; C --> I; D --> I; E --> I; F --> I; G --> I; H --> I;
            I --> J; J --> K; K --> L;
            L --> M; L --> O; L --> P; L --> Q; L --> R;

            %% AI引擎贡献到知识与洞察 (使用 --- 表示非直接数据流)
            M --- N; O --- N; P --- N; Q --- N; R --- N;  
            M --> T; M --> V;
            O --> S; O --> T; O --> U; O --> V;
            P --> S; P --> T; P --> U; P --> V;
            Q --> W;
            R --> Y; R --> Z; 

            %% 知识库支撑洞察层
            N --> S; N --> T; N --> U; N --> V; N --> W;
            N --> BB;

            %% 洞察层驱动应用层
            S --> X; T --> X; U --> X; V --> X; W --> X; 
            T --> AA; W --> AA; 

            %% 应用层交互与反馈
            X --> BB; Y --> BB; Z --> BB; AA --> BB;
            BB -- Feedback --> O; BB -- Feedback --> P; BB -- Feedback --> Q; 
    </div>

</body>
</html>
