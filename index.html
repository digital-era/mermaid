<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Mermaid 调试版</title>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';

        // 初始化 mermaid，开启日志记录
        mermaid.initialize({ 
            startOnLoad: false, 
            logLevel: 'debug'  // 打开详细日志
        });

        // 手动渲染，便于捕获异常
        const graphText = document.getElementById('graph-definition').textContent;

        console.log("Mermaid Graph Definition:\n", graphText);

        try {
            mermaid.parse(graphText);
            console.log("✅ Mermaid 语法检查通过");

            // 渲染图表
            mermaid.run();
        } catch (error) {
            console.error("❌ Mermaid 解析失败:", error);
        }
    </script>
    <style>
        body {
            font-family: "Microsoft YaHei", sans-serif;
            padding: 20px;
            background-color: #f5f5f5;
